# 鸟哥的私房菜 | 第二章

* 各硬件配置在 linux 中的文件名 | 基本都在 /dev 的设备中

机器种类 | 磁盘设备名
--- | ---
物理机 | /dev/sd[a-p]
虚拟机 | /dev/vd[a-p]

## MBR(MS-DOS) 与 GPT 磁盘分区表(partition table)

* MBR 通常把磁盘的 第一个分区 拿来做 磁盘分区表
```
  扇区大小分为 512 和 4k
  主引导记录：可以安装启动引导程序的地方，446 字节
  分区表：记录整块硬盘分区的状态，有 64 字节
  改分区就是更改硬盘的分区表。
  分区的目的：
    1. 安全性：分片管理，例如重装系统等
    2. 性能： 查找区域变少。
```
* 主分区，逻辑分区，拓展分区
```
  主分区：
    分区表中的，最多有四个。受第一扇区 64 Bytes 的分区表大小的影响。
  拓展分区：
    不能保存数据，无法格式化。其中可以划分出逻辑分区。受操作系统限制，只能有一个。
    破坏拓展分区，逻辑分区的信息也就被删除了。
  逻辑分区：
    拓展分区划分出来的分区。可以保存数据，格式化。
    号码由 5 开始，是 MBR 的重要特性
```
* GPT (GUID partition table) 磁盘分区表
```
  在扇区的定义上，用 逻辑区块地址 (Logical Block Address, LBA) 来处理。
  开头结尾都有 34 个区块。 结尾的用来备份
  LBA0：(MBR 兼容区块)
    第一部分 446 字节，存储第一阶段的启动引导程序。
    第二部分 放入特殊标示，标示此磁盘为 GPT 格式。
  LBA1：(GPT 表头记录)
    记录分区表的大小和位置，备份用的 GPT 分区的位置，分区表的校验码。
  LBA2-33：(实际记录分区信息处)
    每个 LBA 四个分区 × 32 个区块 = 128 组分区记录。
  GPT 没有所谓的主，拓展，逻辑分区。可以默认所有的分区都是主分区
  如果磁盘容量大于 2TB， 则默认使用 GPT 分区表
```

## BIOS 和 UEFI 检测程序 | GPT 可兼容 BIOS

* BIOS 搭配 MBR/GPT 
  1. BIOS: 启动主动执行的固件，找到第一个可启动的设备。
  2. MBR: 设备的第一个扇区内的主引导记录块，内含启动引导代码。
  3. 启动引导程序(boot loader): 可读取内核文件来执行的软件。
    1. 提供选项：用户可选择多个启动项。
    2. 加载内核文件: 指向可使用的程序区块来启动操作系统。
    3. 转交给其他启动引导程序。
  4. 内核文件: 开始启动操作系统。
```
  1. 每个分区都有自己的启动扇区(boot sector)
  2. 实际可启动的内核文件是放置到各分区的
  3. 启动引导程序只认识自己分区的可启动的内核文件和其他启动引导程序
  4. 启动引导程序可以直接或者间接将管理权转移给另一个管理程序
```

* UEFI BIOS 搭配 GPT

## linux 安装模式下，磁盘分区的选择 （极重要)

* linux 文件结构 | 根目录 "/" | 目录树结构
* 目录可自由选择挂载到哪个分区